<html>
	<head>
		<title>
			Just a game

		</title>
		<!-- local file below -->
		<!-- ==================================== -->
		<!--our css file -->
		<link rel='stylesheet' href='Style.css'>

		<!-- our js file here-->
		<script language="JavaScript" src="gameJS.js"></script>
		<!-- ==================================== -->

		<!-- module below-->
		<!-- ==================================== -->
		<!-- jquery -->
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
		<!-- future socket.io here --> 
		<!--<script src="/socket.io/socket.io.js"></script>-->
		<script src="/socket.io/socket.io.js"></script>
    	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>

		<!-- ==================================== -->
	</head>
	
	<script>
		let socket = io();
		var num_message = 0;
		var MAX_MESSAGE = 22;
		function addMessage(Text){
			if(num_message>= MAX_MESSAGE){
				$("#message div:nth-child(1)").remove();
			}

			if(num_message %2 ==0){
				$("#message").append("<div style=\"background-color:#F0F8FF\">"+Text+"</div>");
			} 
			else{
				$("#message").append("<div style=\"background-color:#DCDCDC\">"+Text+"</div>");
			}
			num_message+=1;
		}
		socket.on("welcome",()=>{
			$("#LEFT").hide();
			$("#RIGHT").hide();
		})
		socket.on("pl1_choosed", ()=>{
			$("#pl1").hide();
		})
		socket.on("pl2_choosed", ()=>{
			$("#pl2").hide();
		})
		socket.on("start_game", (hp, atk, def, crit)=>{
			$("#choose_pl").hide();
			$("#LEFT").show();
			$("#RIGHT").show();
			$("#my_hp").text(hp);
			$("#my_atk").text(atk);
			$("#my_def").text(def);
			$("#my_crit").text(crit*100 + "%");
			$("#enemy_hp").text(hp);
			$("#enemy_atk").text(atk);
			$("#enemy_def").text(def);
			$("#enemy_crit").text(crit*100 + "%");
		})
		socket.on("update", (p1_hp, p2_hp, msg1, msg2)=>{
			if(id==1){
				$("#my_hp").text(p1_hp);
				$("#enemy_hp").text(p2_hp);
				addMessage("你對敵方" + msg2);
				addMessage("敵方對你" + msg1);
			}else if(id==2){
				$("#my_hp").text(p2_hp);
				$("#enemy_hp").text(p1_hp);
				addMessage("你對敵方" + msg1);
				addMessage("敵方對你" + msg2);
			}
		})

		socket.on("act_ready", (type)=>{
			addMessage("你選擇了" + type);
		})

		$(document).ready(()=>{
			$("#pl1").click(()=>{
				id = 1;
				$("#pl1").hide();
				$("#pl2").hide();
				$("#pl").text("你是玩家1");
				socket.emit("choose", 1);
			});
			$("#pl2").click(()=>{
				id = 2;
				$("#pl1").hide();
				$("#pl2").hide();
				$("#pl").text("你是玩家2");
				socket.emit("choose", 2);
			});
			$("#action_atk").click(()=>{
				socket.emit("action", "atk", id);
			});
			$("#action_def").click(()=>{
				socket.emit("action", "def", id);
			});
		});
	</script>

	<body>
	
	<div id="choose_pl">
		<p id="pl">請選擇角色</p>
		<button id="pl1">player1</button>
      	<button id="pl2">player2</button>
	</div>


	<!-- Display section below -->
	<div id="LEFT">
	
	

    <!-- our status showing below-->
	<!-- ==================================== -->
		<div id="LEFT_TOP">
		<!--屬性欄，此div為最外框-->
    	<div id="my_status" >我方當前狀態 

        <div id="my_basic-data">
        	<!--基本數值-->
			<div>回合數: 第<span id="turn"> 1 </span>回合</div>
			<div>HP: <span id="my_hp">  </span> </div>
            <div>ATK: <span id="my_atk"></span> </div>
			<div>DEF: <span id="my_def"></span> </div>
			<div>Critical: <span id="my_crit"></span> </div>
			<div>Critical Damage: <span id="my_crit_dng">2</span> </div>
        
        </div>

      
		
		<div id="my_sprite">精靈欄 空</div>
	
		<div id="my_sprite_content" class="status_content"></div>


		<div id="my_item" >道具欄: 空</div>
		
		<div id="my_item_content" class="status_content"></div>
		

		
	
	    
        </div> <!-- id=LEFT_TOP closing tag , this section ending here-->

	<!-- all status showing above-->
	<!-- ==================================== -->

	
	<!-- enemy status showing below-->
	<!-- ==================================== -->

		<!--屬性欄，此div為最外框-->
    	<div id="enemy_status" >敵方當前狀態 

        <div id="enemy_basic-data">
        	<!--基本數值-->
			<br>
			<div>HP: <span id="enemy_hp">  </span> </div>
            <div>ATK: <span id="enemy_atk"></span> </div>
			<div>DEF: <span id="enemy_def"></span> </div>
			<div>Critical: <span id="enemy_crit"></span> </div>
			<div>Critical Damage: <span id="enemy_crit_dmg">2</span> </div>
        
        </div>

      
		
		<div id="enemy_sprite">精靈欄 空</div>
	
		<div id="enemy_sprite_content" class="status_content"></div>

		<!--
		<div id="enemy_item" >道具欄: 空</div>
		
		<div id="enemy_item_content" class="status_content"></div>
		-->

		
	
	    
        </div> <!-- id=enemy_status closing tag -->

        </div><!-- id=status closing tag , this section ending here-->
	<!-- all status showing above-->
	<!-- ==================================== -->



	







	<!-- all buttons or something user interaction below-->
	<!-- ==================================== -->
	<div id="LEFT_BOTTOM">
		<div id="mission_sector">
			<div id="my_mission">當前任務: 空</div>
				
			<div id="my_mission_content" class="status_content"></div>
		</div> <!-- mission sector ending here-->
	<!-- ''''''''''''''''''''''''''''''''''''''''''
		Note: you can use this format:

		<div>
    			<button id="action_atk" class="interact-button">  Action </button>
    			Description
    	</div>

		to add new action button 
		''''''''''''''''''''''''''''''''''''''''''  -->

    	<div id="interact_sector" >操作角色
    		<div id="turn_action" class="interact-sector">
    		本回合行動，選擇完後此回合結束

    			<div>
    			<button id="action_atk" class="interact-button"> 攻擊 </button>
    			此回合攻擊對方，有機會造成爆擊
    			</div>

    			<div>
				<button id="action_def" class="interact-button">防禦</button>
				此回合提升50%防禦力
				</div>
    			
			</div> <!-- turn_action 的closing tag-->

			<div id="item_action" class="interact-sector">
			道具欄操作<br>
				<div>
					<button id="item_use" class="interact-button">使用道具</button>
					使用當前道具欄的道具
				</div>

				<div>
				<button id="item_discard" class="interact-button">丟棄道具</button>
				丟棄當前道具欄的道具
				</div>
			</div> <!-- item_action 的closing tag-->

			<div id="misson_action" class="interact-sector">任務操作
    			<div>
					<button id="misson_discard" class="interact-button">放棄任務</button>
					放棄執行當前任務
				</div>

    		</div> <!-- id= mission_action 的closing tag-->

    		


    	</div> <!-- id=interact div closing tag, this section ending here  -->

    </div> <!-- id=LEFT Bottom ending here-->
    <!-- all buttons or something user interaction above-->
	<!-- ==================================== -->

</div> <!-- id=LEFT  ending here-->

<div id="RIGHT">
<!-- show message below--> 
		<!-- ==================================== -->
		
    	<div id="message">message
	<div style="background-color:#F0F8FF">Testing</div>

    	</div>
        
        
        <!-- show message above--> 
		<!-- ==================================== -->

</div> 



</body>



</html>
